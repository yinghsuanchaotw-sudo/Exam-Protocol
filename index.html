<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exam Clock</title>
  <style>
    :root{
      --bg:#f9f9fb;
      --card:#ffffff;
      --muted:#555;
      --text:#111;
      --accent:#0066cc;
      --good:#2d8a3e;
      --warn:#d88a00;
      --bad:#c0392b;
    }
    html{height:100%;}
    body{
      min-height:100vh;
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial;
      background:var(--bg);
      color:var(--text);
      display:block;
      overflow:auto;
    }
    .app{max-width:1400px; width:min(1400px,96vw); margin:24px auto;}
    /* widen the protocol block */
    .grid{display:grid; grid-template-columns: 1fr 600px; gap:20px; align-items:start;}
    @media (max-width: 1100px){.grid{grid-template-columns:1fr;}}

    .card{background:var(--card); border:1px solid #ddd; border-radius:12px; box-shadow: 0 4px 12px rgba(0,0,0,0.08);}
    .pad{padding:20px 22px;}

    .headline{font-size:clamp(42px, 8vw, 64px); font-weight:700; margin:0;}
    .sub{color:var(--muted); font-size:15px;}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .btn{appearance:none; border:1px solid #ccc; background:#f2f2f2; color:var(--text); border-radius:8px; padding:8px 12px; font-size:14px; cursor:pointer; transition:background .2s ease}
    .btn:hover{background:#e6e6e6;}
    .btn.primary{background: var(--accent); border-color:var(--accent); color:#fff}
    .btn.good{background:var(--good); border-color:var(--good); color:#fff}
    .btn.warn{background:var(--warn); border-color:var(--warn); color:#fff}
    .btn.bad{background:var(--bad); border-color:var(--bad); color:#fff}

    .big{font-size: clamp(64px, 10vw, 110px); font-variant-numeric: tabular-nums; line-height:1.05; font-weight:800;}
    .date{font-size: clamp(14px, 2.4vw, 18px); color: var(--muted)}

    .timer{display:grid; grid-template-columns: 1fr; gap:8px}
    .timer .digits{font-size: clamp(36px, 8vw, 72px); font-variant-numeric: tabular-nums; font-weight:700}

    .field{display:flex; flex-direction:column; gap:6px;}
    label{font-size:13px; color:var(--muted)}
    input[type="number"], input[type="text"]{
      background:#fff; color:var(--text); border:1px solid #ccc; border-radius:6px; padding:8px 10px; font-size:14px;
    }
    input[type="number"]:focus, input[type="text"]:focus{border-color:var(--accent); outline:none}

    .progress{height:10px; background:#eee; border-radius:999px; overflow:hidden}
    .bar{height:100%; width:0%; background: var(--accent); transition: width 0.2s ease}

    .section-title{font-weight:800; margin:0 0 8px 0; font-size:20px; color:#222}
    .protocol{font-size:18px; line-height:1.8; color:#111; font-weight:700}
    .scroll{max-height:calc(100vh - 160px); overflow:auto; padding-right:8px;}

    @media (max-height: 700px){
      .big{font-size: clamp(48px, 9vw, 90px);}
      .protocol{font-size:16px; line-height:1.6;}
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="grid">
      <!-- Left: Clock/Timers -->
      <section class="card pad">
        <h1 id="clock" class="big">--:--:--</h1>
        <div id="date" class="date">â€”</div>
        <hr />
        <div class="row">
          <button class="btn primary" id="startElapsed">Start Elapsed</button>
          <button class="btn" id="pauseElapsed">Pause</button>
          <button class="btn" id="resetElapsed">Reset</button>
          <span class="sub">Elapsed:</span>
          <span id="elapsed" class="headline" style="font-size:28px;">00:00:00</span>
        </div>
        <hr />
        <div class="section-title">Countdown</div>
        <div class="row">
          <div class="field"><label>Minutes</label><input id="countdownInput" type="number" value="50"/></div>
          <div class="field"><label>Label</label><input id="labelInput" type="text" placeholder="Exam label"/></div>
        </div>
        <div class="row">
          <button class="btn good" id="startCountdown">Start</button>
          <button class="btn warn" id="pauseCountdown">Pause</button>
          <button class="btn bad" id="resetCountdown">Reset</button>
        </div>
        <div id="countdown" class="headline" style="font-size:36px;">00:00:00</div>
        <div class="progress"><div class="bar" id="bar"></div></div>
        <div id="countdownLabel" class="sub"></div>
      </section>

      <!-- Right: Exam Protocol -->
      <aside class="card pad">
        <div class="section-title">Exam Protocol</div>
        <div class="scroll">
          <div class="protocol" id="protocolText">
            <ol>
              <li>All bags and jackets at the front, side, or back of the room.</li>
              <li>No hoods, hats, sunglasses, or earphones.</li>
              <li>We will <strong>NOT</strong> answer questions during the exam (write concerns on the concern page).</li>
              <li>You may tear off scratch paper and formula sheet but must return all pages at the end.</li>
              <li>You can write on any space in the question booklet, but keep the bubble sheet clean except for answers.</li>
              <li>There are <strong>4 versions</strong>: A, B, C, and D. Bubble in your version.</li>
              <li>Print your full name and PID on the question booklet and on the bubble sheet.</li>
              <li>No bathroom breaks. All eyes on your own exam. Both hands on table all time.</li>
              <li>In case of emergency: empty pockets, hand in your exam, and let the instructor know. We will assign a TA/ULA to escort you, and you must be back within 4 minutes.</li>
            </ol>
          </div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    const pad=(n)=>String(n).padStart(2,'0');
    const clockEl=document.getElementById('clock');
    const dateEl=document.getElementById('date');
    function renderClock(){
      const now=new Date();
      clockEl.textContent=`${pad(now.getHours())}:${pad(now.getMinutes())}:${pad(now.getSeconds())}`;
      dateEl.textContent=now.toDateString();
      setTimeout(renderClock,500);
    }
    renderClock();

    // Elapsed timer
    let elapsedStart=null,elapsedPaused=null,elapsedInterval=null;
    const elapsedEl=document.getElementById('elapsed');
    function format(ms){const s=Math.floor(ms/1000);const h=Math.floor(s/3600);const m=Math.floor((s%3600)/60);const sec=s%60;return `${pad(h)}:${pad(m)}:${pad(sec)}`;}
    function startElapsed(){if(!elapsedStart){elapsedStart=Date.now()-(elapsedPaused||0);elapsedInterval=setInterval(()=>{elapsedEl.textContent=format(Date.now()-elapsedStart);},500);}}
    function pauseElapsed(){if(elapsedStart){elapsedPaused=Date.now()-elapsedStart;elapsedStart=null;clearInterval(elapsedInterval);}}
    function resetElapsed(){elapsedStart=null;elapsedPaused=null;clearInterval(elapsedInterval);elapsedEl.textContent='00:00:00';}
    document.getElementById('startElapsed').onclick=startElapsed;
    document.getElementById('pauseElapsed').onclick=pauseElapsed;
    document.getElementById('resetElapsed').onclick=resetElapsed;

    // Countdown
    const cdEl=document.getElementById('countdown');
    const barEl=document.getElementById('bar');
    const labelEl=document.getElementById('countdownLabel');
    let totalMs=0,remainMs=0,cdTimer=null;
    function updateCountdown(){remainMs-=1000;if(remainMs<0)remainMs=0;cdEl.textContent=format(remainMs);barEl.style.width=`${100*(1-remainMs/totalMs)}%`;if(remainMs<=0)clearInterval(cdTimer);}
    document.getElementById('startCountdown').onclick=()=>{totalMs=(+document.getElementById('countdownInput').value||0)*60000;remainMs=totalMs;labelEl.textContent=document.getElementById('labelInput').value;clearInterval(cdTimer);updateCountdown();cdTimer=setInterval(updateCountdown,1000);};
    document.getElementById('pauseCountdown').onclick=()=>clearInterval(cdTimer);
    document.getElementById('resetCountdown').onclick=()=>{clearInterval(cdTimer);cdEl.textContent='00:00:00';barEl.style.width='0%';labelEl.textContent='';};
  </script>
</body>
</html>
